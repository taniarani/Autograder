<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Welcome to AutoGrade Home Page</title>

    <link rel="stylesheet" th:href="@{webjars/bootstrap/4.2.1/css/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <link rel="stylesheet" th:href="@{/css/student_assignment.css}" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript" th:src="@{webjars/bootstrap/4.2.1/js/bootstrap.min.js}"></script>

</head>

<body>
    <main role="main" class="container">
        <header>
            <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
                <a class="navbar-brand" href="#">AutoGrader</a>
            </nav>
        </header>

        <div class="starter-template">
            <div class="container-fluid">
                <form id="courseCreation" action="" enctype="multipart/form-data">
                    <div class="assignmentCreation">
                        <h2 class="col-xs-12 assignemtSub--heading pb-4 mt-2">Assignment Creation (By Proff)</h2>

                        <div class="form-group row">
                            <label for="name" class="col-sm-2 col-form-label">Name</label>
                            <div class="col-sm-10 form-group-content">
                                <input type="hidden" name="name" class="getValue" value="" aria-hidden="true" />
                                <input type="text" id="assignmentName" class="custom-valid-input restrictInput" name="assignmentName" pattern="[a-zA-Z0-9\s'-]+" placeholder="Name" maxlength="35" required="true" aria-label="name">
                                <p class="error-msg-text" hidden="true">
                                    Name is required</p>

                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="name" class="col-sm-2 col-form-label">Description</label>
                            <div class="col-sm-10 form-group-content">
                                <input type="hidden" name="lastName" class="getValue" value="" aria-hidden="true" />
                                <input type="text" id="description" class="custom-valid-input " name="lastName" required="true" aria-label="description">
                                <p class="error-msg-text" hidden="true">
                                    Description is required</p>

                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="name" class="col-sm-2 col-form-label">Due Date</label>
                            <div class="col-sm-10 form-group-content">
                                <input type="hidden" name="name" class="getValue" value="" aria-hidden="true" />
                                <input type="date" id="dateOfBirth" class="custom-valid-input restrictInput" name="dateOfBirth" maxlength="35" required="true" aria-label="dateOfBirth">
                                <p class="error-msg-text" hidden="true">
                                    Due date is required</p>

                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="name" class="col-sm-2 col-form-label">Marking Completed</label>
                            <div class="col-sm-10 form-group-content">
                                <input type="text" id="markingCompleted" value="No" readonly="readonly" class="custom-valid-input" name="marking" aria-label="marking completed">


                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="name" class="col-sm-2 col-form-label">Module</label>
                            <div class="col-sm-10 form-group-content">
                                <input type="hidden" name="module" class="getValue" value="" aria-hidden="true" />
                                <select id="module" class="custom-valid-input" name="course name" aria-label="Module : select OS, Computer Networking">
                                    <option value="">Select</option>
                                    <option value="OS">OS</option>
                                    <option value="Computer Networking">Computer Networking</option>
                                </select>
                                <p class="error-msg-text" hidden="true">Module is required</p>
                            </div>
                        </div>


                        <div class="form-group row">
                            <label for="name" class="col-sm-2 col-form-label">Number of test cases</label>
                            <div class="col-sm-10 form-group-content">
                                <input type="hidden" name="name" class="getValue" value="" aria-hidden="true" />
                                <input maxlength="255" type="number" aria-label="Number of test cases" value="" class="custom-valid-input" autocomplete="on" required="true">
                                <p class="error-msg-text" hidden="true">
                                    Number of test cases is required</p>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="totalMarks" class="col-sm-2 col-form-label">Total Marks</label>
                            <div class="col-sm-10 form-group-content">
                                <input type="hidden" name="description" class="getValue" value="" aria-hidden="true" />
                                <input name="totalMarks" id="totalMarks" type="number" value="" class="custom-valid-input" maxlength="20" autocomplete="off" aria-label="total marks">
                                <p class="error-msg-text" hidden="true">
                                    Total marks is required</p>
                            </div>
                        </div>

                        <div class="form-group row mt-3">
                            <div class="col-md-6">
                                <table class="emptycell" style="width: 100%;">
                                    <tr>
                                        <th>Test Case Id</th>
                                        <th>Name</th>
                                        <th>Expected Output</th>
                                        <th>Marks</th>
                                    </tr>

                                    <tr class="blank_row">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>

                                    <tr class="blank_row">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>

                                    <tr class="blank_row">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>

                                </table>

                            </div>

                            <div class="col-md-6">
                                <button class="btn save mr-4 btn-primary mt-2" id="save" type="button">Submit</button>
                                <button class="btn btn-cancel mr-4 clear btn-secondary" id="clear" type="button">Clear</button>
                                <button class="btn btn-cancel mr-4 clear btn-secondary" id="clear" type="button">Cancel</button>
                            </div>
                        </div>
                    </div>
            </div>
        </div>

        </form>
    </main>

    <!-- /.container -->

    <script>
        let isValidAssignemnt = true;
        const formDetailsContent = '.form-group-content';

        const assignmentCreation = {
            submitForm() {
                if (isValidAssignemnt) {
                    alert("Form is submitted");
                    $('#roleCreation').submit();
                    //$('#save').text('Resubmit');
                }

            },

            validateInput() {
                isValidAssignemnt = true;
                $('.custom-valid-input').each(function() {
                    if (
                        $(this).val() === null ||
                        $(this)
                        .val()
                        .trim() === ''
                    ) {
                        $(this)
                            .parent()
                            .find('.error-msg-text')
                            .attr('hidden', false);
                        $(this).addClass('error-msg-textbox');
                        isValidAssignemnt = false;
                    } else {
                        $(this)
                            .parent()
                            .find('.error-msg-text')
                            .attr('hidden', true);
                        $(this).removeClass('error-msg-textbox');

                    }
                });
                createStudent.submitForm();
            },

            resetFields() {
                $('form :input').val('');
                $('.custom-valid-input').siblings('.error-msg-text')
                    .attr('hidden', true);
            },

            getValues() {
                var getData = $(this).val();
                const selectedElement = $(this)
                    .parents(formDetailsContent)
                    .find('.getValue').val(getData);
            },


            init() {
                $(document).on('click', '#save', this.validateInput);
                $(document).on('click', '.clear', this.resetFields);
                $(document).on('change', '.custom-valid-input', this.getValues);
            },

        };
        assignmentCreation.init();
    </script>
</body>

</html>